{"version":3,"sources":["TextToSpeechButton.js","Definition.js","SearchHelper.js","SearchEngine.js","SearchBar.js","Search.js","App.js","index.js"],"names":["TextToSpeechButton","props","react_default","a","createElement","Fragment","IconButton","onClick","event","setTimeout","window","responsiveVoice","speak","textData","location","className","VolumeUp_default","capitalize","string","charAt","toUpperCase","slice","Definition","definitionLines","data","split","map","line","word","trim","substring","phonetic","replace","key","uuid","TextToSpeechButton_TextToSpeechButton","vMeaning","eMeaning","getTemplate","Divider","variant","alphabetString","subUrlCollection","isLetter","value","indexOf","buildDataStructure","indexedData","alphabetArray","forEach","i","completeIndexing","item","concat","prepareData","_prepareData","apply","this","arguments","_callee2","defAccessArr","regenerator_default","wrap","_context2","prev","next","Promise","all","fetch","folder","then","_ref","Object","asyncToGenerator","mark","_callee","res","_context","text","abrupt","sent","stop","_x","defData","hwData","groupedData","def","index","_","isArray","char","subStr","defAccess","push","search","dataSource","searchQuery","length","undefined","toLowerCase","resolve","results","filter","definition","startsWith","SearchEngineContext","createContext","SearchEngineContextProvider","_this","classCallCheck","_super","call","state","dataLoaded","suggestions","definitions","searchedDefinitions","searchedSuggestions","doSuggest","count","suggestDebounce","doSearch","searchDebounce","debounce","onSearch","onSuggest","response","setState","cancel","_this2","_this3","Provider","objectSpread2","children","React","Component","AutoComplete","searchEngineContext","useContext","_useState","useState","_useState2","slicedToArray","showPopup","setShowPopup","currentFocus","onInput","val","onKeydown","e","x","document","getElementById","getElementsByTagName","keyCode","addActive","preventDefault","click","classList","remove","removeActive","add","addEventListener","useEffect","searchInput","removeEventListener","id","dataItem","onItemSelected","type","SearchBar","_useState3","_useState4","searchStr","setSearchStr","TextField","label","autoComplete","margin","onChange","onSearchQueryChanged","target","persist","aria-label","color","Search_default","Search","Card","SearchBar_SearchBar","result","Definition_Definition","App","SearchEngine","Search_Search","rootElement","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.f0eab89f.chunk.js","sourcesContent":["// https://itnext.io/access-responsivevoice-js-in-react-app-without-a-package-a062b8d92950\nimport React from \"react\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport VolumeUpIcon from \"@material-ui/icons/VolumeUp\";\nimport \"./TextToSpeechButton.css\";\n\nexport function TextToSpeechButton(props) {\n  function speak(event) {\n    setTimeout(\n      window.responsiveVoice.speak(props.textData, props.location),\n      50\n    );\n  }\n\n  return (\n    <React.Fragment>\n      <IconButton onClick={speak} className=\"speaker\">\n        <VolumeUpIcon />\n      </IconButton>\n    </React.Fragment>\n  );\n}\n","import React from \"react\";\nimport Divider from \"@material-ui/core/Divider\";\nimport { v4 as uuid } from \"uuid\";\nimport { TextToSpeechButton } from \"./TextToSpeechButton\";\nimport \"./Definition.css\";\n\nfunction capitalize(string) {\n  return string.charAt(0).toUpperCase() + string.slice(1);\n}\n\nexport const Definition = props => {\n  const definitionLines = props.data.split(/\\r?\\n/);\n\n  function getTemplate(data) {\n    switch (data.charAt(0)) {\n      case \"@\":\n        const word = data\n          .split(\"/\")[0]\n          .trim()\n          .substring(1);\n        const phonetic = data.substring(1).replace(word, \"\");\n        return (\n          <div className=\"headword\" key={uuid()}>\n            <p className=\"word-search-key\">{capitalize(word)}</p>\n            <span className=\"phon\">{phonetic}</span>\n            <div className=\"sound\">\n              <TextToSpeechButton\n                textData={word}\n                location={\"US English Female\"}\n              />\n              <span>us</span>\n              <TextToSpeechButton\n                textData={word}\n                location={\"UK English Female\"}\n              />\n              <span>uk</span>\n            </div>\n            <div className=\"clear\" />\n          </div>\n        );\n      case \"*\":\n        return (\n          <div key={uuid()}>\n            <p className=\"word-type\">{capitalize(data.substring(1).trim())}</p>\n            <div className=\"clear\" />\n          </div>\n        );\n      case \"!\":\n      case \"-\":\n        return (\n          <div key={uuid()} className=\"word-meaning\">\n            <p>{capitalize(data.substring(1).trim())}</p>\n          </div>\n        );\n      case \"=\":\n        const vMeaning = capitalize(\n          data\n            .split(\"+\")[0]\n            .substring(1)\n            .trim()\n        );\n        const eMeaning = capitalize(\n          data\n            .split(\"+\")[1]\n            .substring(1)\n            .trim()\n        );\n        return (\n          <div key={uuid()} className=\"word-sentence\">\n            <p>\n              <i>{vMeaning}</i>\n            </p>\n            <p>\n              <i>{eMeaning}</i>\n            </p>\n          </div>\n        );\n      default:\n        return data;\n    }\n  }\n\n  return (\n    <React.Fragment>\n      <article>\n        {definitionLines.map(line => {\n          return getTemplate(line);\n        })}\n      </article>\n      <Divider variant=\"middle\" />\n    </React.Fragment>\n  );\n};\n","import _ from \"lodash\";\n\nexport const alphabetString = \"abcdefghijklmnopqrstuvwxyz\";\nexport const subUrlCollection =\n  \"a1:a2:a3:b1:b2:c1:c2:c3:c4:c5:d1:d2:d3:e1:e2:f1:f2:g:h1:h2:i1:i2:i3:j:k:l1:l2:m1:m2:n:o:p1:p2:p3:p4:p5:q:r1:r2:r3:s:t1:t2:u1:u2:v:w:x:y:z\";\n\nexport function isLetter(value) {\n  return alphabetString.indexOf(value) !== -1;\n}\n\nexport function extractWord(definition) {\n  return definition\n    .split(\"/\")[0]\n    .trim()\n    .substring(0);\n}\n\nexport function buildDataStructure() {\n  var indexedData = {};\n  const alphabetArray = alphabetString.split(\"\");\n\n  alphabetArray.forEach(i => {\n    indexedData[i] = {\n      completeIndexing: false\n    };\n\n    alphabetArray.forEach(item => {\n      item === i && (indexedData[i][`${i}~`] = []);\n      indexedData[i][`${i}${item}`] = [];\n    });\n  });\n\n  return indexedData;\n}\n\nfunction getUrl(folder) {\n  return `https://raw.githubusercontent.com/weewaves/MyDictionaryStorage/master/${folder}.txt`;\n}\n\nexport async function prepareData() {\n  const defAccessArr = subUrlCollection.split(\":\");\n\n  return await Promise.all(\n    defAccessArr.map(i => {\n      return fetch(getUrl(i)).then(async res => await res.text());\n    })\n  ).then(res => {\n    const defData = buildDataStructure();\n    const hwData = buildDataStructure();\n    var groupedData = {};\n\n    defAccessArr.forEach((def, index) => {\n      const key = def.charAt(0);\n\n      if (!_.isArray(groupedData[key])) {\n        groupedData[key] = res[index].split(\"\\n\\n\");\n      } else {\n        groupedData[key] = groupedData[key].concat(res[index].split(\"\\n\\n\"));\n      }\n    });\n\n    alphabetString.split(\"\").forEach(char => {\n      groupedData[char].forEach(def => {\n        const subStr = def.substring(1, 3);\n        const defAccess = !isLetter(subStr.charAt(1))\n          ? `${subStr.charAt(0)}~`\n          : subStr;\n        if (_.isArray(defData[char][defAccess])) {\n          defData[char][defAccess].push(def);\n        }\n\n        if (_.isArray(hwData[char][defAccess])) {\n          hwData[char][defAccess].push(extractWord(def));\n        }\n      });\n\n      defData[char].completeIndexing = true;\n    });\n\n    return {\n      defData: defData,\n      hwData: hwData\n    };\n  });\n}\n\nexport function search(dataSource, searchQuery, count = 10) {\n  searchQuery = searchQuery.toLowerCase();\n\n  if (\n    !searchQuery ||\n    searchQuery.trim().length < 1 ||\n    !isLetter(searchQuery.charAt(0))\n  ) {\n    return Promise.resolve([]);\n  }\n\n  return new Promise(function(resolve) {\n    var results = [];\n    const defAccess =\n      searchQuery.length === 1 || !isLetter(searchQuery.charAt(1))\n        ? `${searchQuery.charAt(0)}~`\n        : searchQuery.substring(0, 2);\n\n    results = dataSource[searchQuery.charAt(0)][defAccess].filter(\n      definition => {\n        return definition.startsWith(`@${searchQuery}`);\n      }\n    );\n\n    if (results.length > 10) {\n      results = results.slice(0, 10);\n    }\n\n    resolve(results);\n  });\n}\n","import React, { createContext } from \"react\";\nimport _ from \"lodash\";\nimport { search, prepareData } from \"./SearchHelper\";\n\nexport const SearchEngineContext = createContext();\n\nclass SearchEngineContextProvider extends React.Component {\n  state = {\n    dataLoaded: false,\n    suggestions: {},\n    definitions: {},\n    searchedDefinitions: [],\n    searchedSuggestions: []\n  };\n\n  constructor(props) {\n    super(props);\n    this.searchDebounce = _.debounce(this.onSearch, 100);\n    this.suggestDebounce = _.debounce(this.onSuggest, 100);\n  }\n\n  async componentDidMount() {\n    const response = await prepareData();\n\n    this.setState({ dataLoaded: true });\n    this.setState({ definitions: response.defData });\n    this.setState({ suggestions: response.hwData });\n  }\n\n  componentWillUnmount() {\n    this.searchDebounce.cancel();\n    this.suggestDebounce.cancel();\n  }\n\n  doSuggest = (searchQuery, count) => {\n    this.suggestDebounce(searchQuery, count);\n  };\n\n  doSearch = (searchQuery, count) => {\n    this.searchDebounce(searchQuery, count);\n  };\n\n  onSearch(searchQuery, count) {\n    if (!this.state.dataLoaded) {\n      return;\n    }\n\n    search(this.state.definitions, searchQuery, count).then(results => {\n      this.setState({ searchedDefinitions: results });\n    });\n  }\n\n  onSuggest(searchQuery, count) {\n    if (!this.state.dataLoaded) {\n      return;\n    }\n\n    search(this.state.suggestions, searchQuery, count).then(results => {\n      this.setState({ searchedSuggestions: results });\n    });\n  }\n\n  render() {\n    return (\n      <SearchEngineContext.Provider\n        value={{\n          ...this.state,\n          doSearch: this.doSearch,\n          doSuggest: this.doSuggest\n        }}\n      >\n        {this.props.children}\n      </SearchEngineContext.Provider>\n    );\n  }\n}\n\nexport default SearchEngineContextProvider;\n","import React, { useContext, useState, useEffect } from \"react\";\nimport { SearchEngineContext } from \"./SearchEngine\";\nimport \"./SearchBar.css\";\nimport TextField from \"@material-ui/core/TextField\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport SearchIcon from \"@material-ui/icons/Search\";\n\nfunction AutoComplete(props) {\n  const searchEngineContext = useContext(SearchEngineContext);\n  const [showPopup, setShowPopup] = useState(true);\n\n  var currentFocus = -1;\n\n  /*execute a function when someone clicks in the document:*/\n  document.addEventListener(\"click\", function(e) {\n    setShowPopup(false);\n  });\n\n  useEffect(function() {\n    /*initiate the autocomplete function on the \"myInput\" element, and pass along the countries array as possible autocomplete values:*/\n    const searchInput = document.getElementById(\"searchInput\");\n\n    searchInput.addEventListener(\"input\", onInput);\n    searchInput.addEventListener(\"keydown\", onKeydown);\n\n    return function cleanup() {\n      searchInput.removeEventListener(\"input\", onInput);\n      searchInput.removeEventListener(\"keydown\", onKeydown);\n    };\n  });\n\n  function onInput() {\n    var val = this.value;\n\n    setShowPopup(false);\n\n    if (!val) {\n      return false;\n    }\n\n    currentFocus = -1;\n    setShowPopup(true);\n  }\n\n  function onKeydown(e) {\n    var x = document.getElementById(\"autocomplete-popup\");\n    if (x) x = x.getElementsByTagName(\"div\");\n    if (e.keyCode === 40) {\n      currentFocus++;\n      addActive(x);\n    } else if (e.keyCode === 38) {\n      currentFocus--;\n      addActive(x);\n    } else if (e.keyCode === 13) {\n      e.preventDefault();\n      if (currentFocus > -1) {\n        if (x) x[currentFocus].click();\n      }\n    }\n  }\n\n  function addActive(x) {\n    /*a function to classify an item as \"active\":*/\n    if (!x) return false;\n    /*start by removing the \"active\" class on all items:*/\n    removeActive(x);\n    if (currentFocus >= x.length) {\n      currentFocus = 0;\n    }\n\n    if (currentFocus < 0) {\n      currentFocus = x.length - 1;\n    }\n\n    if (x[currentFocus]) {\n      /*add class \"autocomplete-active\":*/\n      x[currentFocus].classList.add(\"autocomplete-active\");\n    }\n  }\n\n  function removeActive(x) {\n    /*a function to remove the \"active\" class from all autocomplete items:*/\n    for (var i = 0; i < x.length; i++) {\n      x[i].classList.remove(\"autocomplete-active\");\n    }\n  }\n\n  function onSelect(event, dataItem, index) {\n    props.onItemSelected(dataItem);\n    setShowPopup(false);\n  }\n\n  return (\n    <React.Fragment>\n      <div id=\"autocomplete-popup\" className=\"autocomplete-popup\">\n        {showPopup &&\n          searchEngineContext.searchedSuggestions.map((item, index) => {\n            const word = item.substring(1);\n\n            return (\n              <div\n                key={index}\n                onClick={event => {\n                  onSelect(event, word, index);\n                }}\n              >\n                <strong>{word}</strong>\n                <input type=\"hidden\" value={word} />\n              </div>\n            );\n          })}\n      </div>\n    </React.Fragment>\n  );\n}\n\nexport const SearchBar = props => {\n  const [searchStr, setSearchStr] = useState(props.searchQuery);\n  const searchEngineContext = useContext(SearchEngineContext);\n\n  function onSearchButtonClick(event) {\n    event.persist();\n    searchEngineContext.doSearch(searchStr);\n  }\n\n  function onSearchQueryChanged(value) {\n    setSearchStr(value);\n    searchEngineContext.doSuggest(value);\n  }\n\n  function onItemSelected(item) {\n    setSearchStr(item);\n  }\n\n  return (\n    <React.Fragment>\n      <div className=\"searchBar\">\n        <div className=\"searchInputWrapper\">\n          <TextField\n            id=\"searchInput\"\n            label=\"Tra từ\"\n            autoComplete=\"off\"\n            className=\"searchInput\"\n            margin=\"normal\"\n            variant=\"outlined\"\n            value={searchStr}\n            onChange={event => {\n              const value = event.target.value;\n              onSearchQueryChanged(value);\n              event.persist();\n            }}\n          />\n          <AutoComplete\n            onItemSelected={onItemSelected}\n            data={searchEngineContext.searchedDefinitions}\n          />\n        </div>\n        <IconButton\n          className=\"searchButton\"\n          onClick={onSearchButtonClick}\n          aria-label=\"search\"\n          color=\"inherit\"\n        >\n          <SearchIcon />\n        </IconButton>\n      </div>\n    </React.Fragment>\n  );\n};\n","import React, { useContext, useState } from \"react\";\nimport { Definition } from \"./Definition\";\nimport { SearchBar } from \"./SearchBar\";\nimport Card from \"@material-ui/core/Card\";\nimport { SearchEngineContext } from \"./SearchEngine\";\nimport { v4 as uuid } from \"uuid\";\n\nexport const Search = () => {\n  const searchEngineContext = useContext(SearchEngineContext);\n  const [searchQuery] = useState(\"\");\n\n  return (\n    <div id=\"dictionary\">\n      <Card className=\"card\">\n        <SearchBar searchQuery={searchQuery} />\n        {searchEngineContext.searchedDefinitions.map(result => {\n          return <Definition key={uuid()} data={result} />;\n        })}\n      </Card>\n    </div>\n  );\n};\n","import React from \"react\";\nimport \"./styles.css\";\nimport { Search } from \"./Search\";\nimport SearchEngineContextProvider from \"./SearchEngine\";\n\nexport default function App() {\n  return (\n    <div className=\"App\">\n      <SearchEngineContextProvider>\n        <Search />\n      </SearchEngineContextProvider>\n    </div>\n  );\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport App from \"./App\";\n\nconst rootElement = document.getElementById(\"root\");\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  rootElement\n);\n"],"sourceRoot":""}